#!/bin/sh

DIR="$(dirname "$(realpath "$0")")"
PARENT_DIR="$(dirname "$DIR")"

NODE_FLAGS="--enable-source-maps"

NO_WATCH=false
for arg in "$@"; do
  if [ "$arg" = "--no-watch" ]; then
    NO_WATCH=true
    break
  fi
done

if [ "$NO_WATCH" = false ]; then
  NODE_FLAGS="$NODE_FLAGS --watch --watch-preserve-output"
fi

node $NODE_FLAGS "${PARENT_DIR}/libnest-dev.js" "$@"
