#!/bin/sh

DIR=$(cd "$(dirname "$0")" && pwd)
PARENT_DIR="$(dirname "$DIR")"

NO_WATCH=false
for arg in "$@"; do
  if [ "$arg" = "--no-watch" ]; then
    NO_WATCH=true
    break
  fi
done

RUNTIME_ARGS="--enable-source-maps"
if [ "$NO_WATCH" = false ]; then
  RUNTIME_ARGS="$RUNTIME_ARGS --watch --watch-preserve-output"
fi

exec node $RUNTIME_ARGS "${PARENT_DIR}/libnest-dev.js" "$@"
